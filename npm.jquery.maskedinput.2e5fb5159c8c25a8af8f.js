(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"8R3r":function(e,t,n){var a,i,r;i=[n("EVdn")],void 0===(r="function"==typeof(a=function(e){var t,n=navigator.userAgent,a=/iphone/i.test(n),i=/chrome/i.test(n),r=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden")&&this.get(0)===document.activeElement)return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,o){var c,l,u,s,f,h,g;if(!n&&this.length>0){var m=e(this[0]).data(e.mask.dataName);return m?m():void 0}return o=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},o),c=e.mask.definitions,l=[],u=h=n.length,s=null,n=String(n),e.each(n.split(""),(function(e,t){"?"==t?(h--,u=e):c[t]?(l.push(new RegExp(c[t])),null===s&&(s=l.length-1),e<u&&(f=l.length-1)):l.push(null)})),this.trigger("unmask").each((function(){var m=e(this),d=e.map(n.split(""),(function(e,t){if("?"!=e)return c[e]?k(t):e})),p=d.join(""),v=m.val();function b(){if(o.completed){for(var e=s;e<=f;e++)if(l[e]&&d[e]===k(e))return;o.completed.call(m)}}function k(e){return e<o.placeholder.length?o.placeholder.charAt(e):o.placeholder.charAt(0)}function y(e){for(;++e<h&&!l[e];);return e}function w(e,t){var n,a;if(!(e<0)){for(n=e,a=y(t);n<h;n++)if(l[n]){if(!(a<h&&l[n].test(d[a])))break;d[n]=d[a],d[a]=k(a),a=y(a)}A(),m.caret(Math.max(s,e))}}function x(e){S(),m.val()!=v&&m.change()}function R(e,t){var n;for(n=e;n<t&&n<h;n++)l[n]&&(d[n]=k(n))}function A(){m.val(d.join(""))}function S(e){var t,n,a,i=m.val(),r=-1;for(t=0,a=0;t<h;t++)if(l[t]){for(d[t]=k(t);a++<i.length;)if(n=i.charAt(a-1),l[t].test(n)){d[t]=n,r=t;break}if(a>i.length){R(t+1,h);break}}else d[t]===i.charAt(a)&&a++,t<u&&(r=t);return e?A():r+1<u?o.autoclear||d.join("")===p?(m.val()&&m.val(""),R(0,h)):A():(A(),m.val(m.val().substring(0,r+1))),u?t:s}m.data(e.mask.dataName,(function(){return e.map(d,(function(e,t){return l[t]&&e!=k(t)?e:null})).join("")})),m.one("unmask",(function(){m.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;m.prop("readonly")||(clearTimeout(t),v=m.val(),e=S(),t=setTimeout((function(){m.get(0)===document.activeElement&&(A(),e==n.replace("?","").length?m.caret(0,e):m.caret(e))}),10))})).on("blur.mask",x).on("keydown.mask",(function(e){if(!m.prop("readonly")){var t,n,i,r=e.which||e.keyCode;g=m.val(),8===r||46===r||a&&127===r?(n=(t=m.caret()).begin,(i=t.end)-n==0&&(n=46!==r?function(e){for(;--e>=0&&!l[e];);return e}(n):i=y(n-1),i=46===r?y(i):i),R(n,i),w(n,i-1),e.preventDefault()):13===r?x.call(this,e):27===r&&(m.val(v),m.caret(0,S()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!m.prop("readonly")){var n,a,i,o=t.which||t.keyCode,c=m.caret();t.ctrlKey||t.altKey||t.metaKey||o<32||!o||13===o||(c.end-c.begin!=0&&(R(c.begin,c.end),w(c.begin,c.end-1)),(n=y(c.begin-1))<h&&(a=String.fromCharCode(o),l[n].test(a))&&(function(e){var t,n,a,i;for(t=e,n=k(e);t<h;t++)if(l[t]){if(a=y(t),i=d[t],d[t]=n,!(a<h&&l[a].test(i)))break;n=i}}(n),d[n]=a,A(),i=y(n),r?setTimeout((function(){e.proxy(e.fn.caret,m,i)()}),0):m.caret(i),c.begin<=f&&b()),t.preventDefault())}})).on("input.mask paste.mask",(function(){m.prop("readonly")||setTimeout((function(){var e=S(!0);m.caret(e),b()}),0)})),i&&r&&m.off("input.mask").on("input.mask",(function(e){var t=m.val(),n=m.caret();if(g&&g.length&&g.length>t.length){for(S(!0);n.begin>0&&!l[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<s&&!l[n.begin];)n.begin++;m.caret(n.begin,n.begin)}else{S(!0);var a=t.charAt(n.begin);n.begin<h&&(l[n.begin]||n.begin++,l[n.begin].test(a)&&n.begin++),m.caret(n.begin,n.begin)}b()})),S()}))}})})?a.apply(t,i):a)||(e.exports=r)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5Lm1hc2tlZGlucHV0L3NyYy9qcXVlcnkubWFza2VkaW5wdXQuanMiXSwibmFtZXMiOlsiJCIsImNhcmV0VGltZW91dElkIiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpUGhvbmUiLCJ0ZXN0IiwiY2hyb21lIiwiYW5kcm9pZCIsIm1hc2siLCJkZWZpbml0aW9ucyIsImF1dG9jbGVhciIsImRhdGFOYW1lIiwicGxhY2Vob2xkZXIiLCJmbiIsImV4dGVuZCIsImNhcmV0IiwiYmVnaW4iLCJlbmQiLCJyYW5nZSIsInRoaXMiLCJsZW5ndGgiLCJpcyIsImdldCIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsImVhY2giLCJzZXRTZWxlY3Rpb25SYW5nZSIsImNyZWF0ZVRleHRSYW5nZSIsImNvbGxhcHNlIiwibW92ZUVuZCIsIm1vdmVTdGFydCIsInNlbGVjdCIsInNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uRW5kIiwic2VsZWN0aW9uIiwiY3JlYXRlUmFuZ2UiLCJkdXBsaWNhdGUiLCJ0ZXh0IiwidW5tYXNrIiwidHJpZ2dlciIsInNldHRpbmdzIiwiZGVmcyIsInRlc3RzIiwicGFydGlhbFBvc2l0aW9uIiwiZmlyc3ROb25NYXNrUG9zIiwibGFzdFJlcXVpcmVkTm9uTWFza1BvcyIsImxlbiIsIm9sZFZhbCIsImRhdGEiLCJ1bmRlZmluZWQiLCJjb21wbGV0ZWQiLCJTdHJpbmciLCJzcGxpdCIsImkiLCJjIiwicHVzaCIsIlJlZ0V4cCIsImlucHV0IiwiYnVmZmVyIiwibWFwIiwiZ2V0UGxhY2Vob2xkZXIiLCJkZWZhdWx0QnVmZmVyIiwiam9pbiIsImZvY3VzVGV4dCIsInZhbCIsInRyeUZpcmVDb21wbGV0ZWQiLCJjYWxsIiwiY2hhckF0Iiwic2Vla05leHQiLCJwb3MiLCJzaGlmdEwiLCJqIiwid3JpdGVCdWZmZXIiLCJNYXRoIiwibWF4IiwiYmx1ckV2ZW50IiwiZSIsImNoZWNrVmFsIiwiY2hhbmdlIiwiY2xlYXJCdWZmZXIiLCJzdGFydCIsImFsbG93IiwibGFzdE1hdGNoIiwic3Vic3RyaW5nIiwib25lIiwib2ZmIiwicmVtb3ZlRGF0YSIsIm9uIiwicHJvcCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZXBsYWNlIiwiayIsIndoaWNoIiwia2V5Q29kZSIsInNlZWtQcmV2IiwicHJldmVudERlZmF1bHQiLCJwIiwibmV4dCIsImN0cmxLZXkiLCJhbHRLZXkiLCJtZXRhS2V5IiwiZnJvbUNoYXJDb2RlIiwidCIsInNoaWZ0UiIsInByb3h5IiwiY3VyVmFsIiwibGFzdEVudGVyZWRWYWx1ZSJdLCJtYXBwaW5ncyI6ImlGQUFBLFVBR1EsRUFBTyxDQUFDLGdCQUFrQiwwQkFBUCxFQVF6QixTQUFVQSxHQUVaLElBSUNDLEVBSkdDLEVBQUtDLFVBQVVDLFVBQ2xCQyxFQUFTLFVBQVVDLEtBQUtKLEdBQ3hCSyxFQUFTLFVBQVVELEtBQUtKLEdBQ3hCTSxFQUFVLFdBQVdGLEtBQUtKLEdBRzNCRixFQUFFUyxLQUFPLENBRVJDLFlBQWEsQ0FDWixFQUFLLFFBQ0wsRUFBSyxXQUNMLElBQUssZUFFTkMsV0FBVyxFQUNYQyxTQUFVLFlBQ1ZDLFlBQWEsS0FHZGIsRUFBRWMsR0FBR0MsT0FBTyxDQUVYQyxNQUFPLFNBQVNDLEVBQU9DLEdBQ3RCLElBQUlDLEVBRUosR0FBb0IsSUFBaEJDLEtBQUtDLFNBQWdCRCxLQUFLRSxHQUFHLFlBQWNGLEtBQUtHLElBQUksS0FBT0MsU0FBU0MsY0FJeEUsTUFBb0IsaUJBQVRSLEdBQ1ZDLEVBQXNCLGlCQUFSQSxFQUFvQkEsRUFBTUQsRUFDakNHLEtBQUtNLE1BQUssV0FDWk4sS0FBS08sa0JBQ1JQLEtBQUtPLGtCQUFrQlYsRUFBT0MsR0FDcEJFLEtBQUtRLG1CQUNmVCxFQUFRQyxLQUFLUSxtQkFDUEMsVUFBUyxHQUNmVixFQUFNVyxRQUFRLFlBQWFaLEdBQzNCQyxFQUFNWSxVQUFVLFlBQWFkLEdBQzdCRSxFQUFNYSxlQUlKWixLQUFLLEdBQUdPLG1CQUNYVixFQUFRRyxLQUFLLEdBQUdhLGVBQ2hCZixFQUFNRSxLQUFLLEdBQUdjLGNBQ0pWLFNBQVNXLFdBQWFYLFNBQVNXLFVBQVVDLGNBQ25EakIsRUFBUUssU0FBU1csVUFBVUMsY0FDM0JuQixFQUFRLEVBQUlFLEVBQU1rQixZQUFZTixVQUFVLGFBQWMsS0FDdERiLEVBQU1ELEVBQVFFLEVBQU1tQixLQUFLakIsUUFFbkIsQ0FBRUosTUFBT0EsRUFBT0MsSUFBS0EsS0FHOUJxQixPQUFRLFdBQ1AsT0FBT25CLEtBQUtvQixRQUFRLFdBRXJCL0IsS0FBTSxTQUFTQSxFQUFNZ0MsR0FDcEIsSUFDQ0MsRUFDQUMsRUFDQUMsRUFDQUMsRUFDU0MsRUFDQUMsRUFDQUMsRUFFVixJQUFLdkMsR0FBUVcsS0FBS0MsT0FBUyxFQUFHLENBRXBCLElBQUlQLEVBRExkLEVBQUVvQixLQUFLLElBQ1M2QixLQUFLakQsRUFBRVMsS0FBS0csVUFDcEMsT0FBT0UsRUFBR0EsU0FBS29DLEVBa0NoQixPQS9CQVQsRUFBV3pDLEVBQUVlLE9BQU8sQ0FDbkJKLFVBQVdYLEVBQUVTLEtBQUtFLFVBQ2xCRSxZQUFhYixFQUFFUyxLQUFLSSxZQUNwQnNDLFVBQVcsTUFDVFYsR0FHSEMsRUFBTzFDLEVBQUVTLEtBQUtDLFlBQ2RpQyxFQUFRLEdBQ1JDLEVBQWtCRyxFQUFNdEMsRUFBS1ksT0FDN0J3QixFQUFrQixLQUVsQnBDLEVBQU8yQyxPQUFPM0MsR0FFZFQsRUFBRTBCLEtBQUtqQixFQUFLNEMsTUFBTSxLQUFLLFNBQVNDLEVBQUdDLEdBQ3pCLEtBQUxBLEdBQ0hSLElBQ0FILEVBQWtCVSxHQUNSWixFQUFLYSxJQUNmWixFQUFNYSxLQUFLLElBQUlDLE9BQU9mLEVBQUthLEtBQ0gsT0FBcEJWLElBQ0hBLEVBQWtCRixFQUFNdEIsT0FBUyxHQUVuQmlDLEVBQUlWLElBQ0hFLEVBQXlCSCxFQUFNdEIsT0FBUyxJQUd4RHNCLEVBQU1hLEtBQUssU0FJTnBDLEtBQUtvQixRQUFRLFVBQVVkLE1BQUssV0FDbEMsSUFBSWdDLEVBQVExRCxFQUFFb0IsTUFDYnVDLEVBQVMzRCxFQUFFNEQsSUFDUG5ELEVBQUs0QyxNQUFNLEtBQ1gsU0FBU0UsRUFBR0QsR0FDWCxHQUFTLEtBQUxDLEVBQ0gsT0FBT2IsRUFBS2EsR0FBS00sRUFBZVAsR0FBS0MsS0FHM0NPLEVBQWdCSCxFQUFPSSxLQUFLLElBQzVCQyxFQUFZTixFQUFNTyxNQUVWLFNBQVNDLElBQ0wsR0FBS3pCLEVBQVNVLFVBQWQsQ0FJQSxJQUFLLElBQUlHLEVBQUlULEVBQWlCUyxHQUFLUixFQUF3QlEsSUFDdkQsR0FBSVgsRUFBTVcsSUFBTUssRUFBT0wsS0FBT08sRUFBZVAsR0FDekMsT0FHUmIsRUFBU1UsVUFBVWdCLEtBQUtULElBRzVCLFNBQVNHLEVBQWVQLEdBQ3BCLE9BQUdBLEVBQUliLEVBQVM1QixZQUFZUSxPQUNqQm9CLEVBQVM1QixZQUFZdUQsT0FBT2QsR0FDaENiLEVBQVM1QixZQUFZdUQsT0FBTyxHQUdoRCxTQUFTQyxFQUFTQyxHQUNqQixPQUFTQSxFQUFNdkIsSUFBUUosRUFBTTJCLEtBQzdCLE9BQU9BLEVBUVIsU0FBU0MsRUFBT3RELEVBQU1DLEdBQ3JCLElBQUlvQyxFQUNIa0IsRUFFRCxLQUFJdkQsRUFBTSxHQUFWLENBSUEsSUFBS3FDLEVBQUlyQyxFQUFPdUQsRUFBSUgsRUFBU25ELEdBQU1vQyxFQUFJUCxFQUFLTyxJQUMzQyxHQUFJWCxFQUFNVyxHQUFJLENBQ2IsS0FBSWtCLEVBQUl6QixHQUFPSixFQUFNVyxHQUFHaEQsS0FBS3FELEVBQU9hLEtBSW5DLE1BSEFiLEVBQU9MLEdBQUtLLEVBQU9hLEdBQ25CYixFQUFPYSxHQUFLWCxFQUFlVyxHQUs1QkEsRUFBSUgsRUFBU0csR0FHZkMsSUFDQWYsRUFBTTFDLE1BQU0wRCxLQUFLQyxJQUFJOUIsRUFBaUI1QixLQTBEdkMsU0FBUzJELEVBQVVDLEdBQ05DLElBRUlwQixFQUFNTyxPQUFTRCxHQUNmTixFQUFNcUIsU0FvRnZCLFNBQVNDLEVBQVlDLEVBQU8vRCxHQUMzQixJQUFJb0MsRUFDSixJQUFLQSxFQUFJMkIsRUFBTzNCLEVBQUlwQyxHQUFPb0MsRUFBSVAsRUFBS08sSUFDL0JYLEVBQU1XLEtBQ1RLLEVBQU9MLEdBQUtPLEVBQWVQLElBSzlCLFNBQVNtQixJQUFnQmYsRUFBTU8sSUFBSU4sRUFBT0ksS0FBSyxLQUUvQyxTQUFTZSxFQUFTSSxHQUVqQixJQUVDNUIsRUFDQUMsRUFDQWUsRUFKR2hFLEVBQU9vRCxFQUFNTyxNQUNoQmtCLEdBQWEsRUFLZCxJQUFLN0IsRUFBSSxFQUFHZ0IsRUFBTSxFQUFHaEIsRUFBSVAsRUFBS08sSUFDN0IsR0FBSVgsRUFBTVcsR0FBSSxDQUViLElBREFLLEVBQU9MLEdBQUtPLEVBQWVQLEdBQ3BCZ0IsSUFBUWhFLEVBQUtlLFFBRW5CLEdBREFrQyxFQUFJakQsRUFBSzhELE9BQU9FLEVBQU0sR0FDbEIzQixFQUFNVyxHQUFHaEQsS0FBS2lELEdBQUksQ0FDckJJLEVBQU9MLEdBQUtDLEVBQ1o0QixFQUFZN0IsRUFDWixNQUdGLEdBQUlnQixFQUFNaEUsRUFBS2UsT0FBUSxDQUN0QjJELEVBQVkxQixFQUFJLEVBQUdQLEdBQ25CLFlBR3FCWSxFQUFPTCxLQUFPaEQsRUFBSzhELE9BQU9FLElBQzFCQSxJQUVBaEIsRUFBSVYsSUFDSnVDLEVBQVk3QixHQXFCcEMsT0FqQkk0QixFQUNIVCxJQUNVVSxFQUFZLEVBQUl2QyxFQUN0QkgsRUFBUzlCLFdBQWFnRCxFQUFPSSxLQUFLLE1BQVFELEdBRzFDSixFQUFNTyxPQUFPUCxFQUFNTyxJQUFJLElBQzFCZSxFQUFZLEVBQUdqQyxJQUlmMEIsS0FHREEsSUFDQWYsRUFBTU8sSUFBSVAsRUFBTU8sTUFBTW1CLFVBQVUsRUFBR0QsRUFBWSxLQUV4Q3ZDLEVBQWtCVSxFQUFJVCxFQUcvQmEsRUFBTVQsS0FBS2pELEVBQUVTLEtBQUtHLFVBQVMsV0FDMUIsT0FBT1osRUFBRTRELElBQUlELEdBQVEsU0FBU0osRUFBR0QsR0FDaEMsT0FBT1gsRUFBTVcsSUFBSUMsR0FBR00sRUFBZVAsR0FBS0MsRUFBSSxRQUMxQ1EsS0FBSyxPQUlUTCxFQUNFMkIsSUFBSSxVQUFVLFdBQ2QzQixFQUNFNEIsSUFBSSxTQUNKQyxXQUFXdkYsRUFBRVMsS0FBS0csYUFFcEI0RSxHQUFHLGNBQWMsV0FNakIsSUFBSWxCLEVBTGVaLEVBQU0rQixLQUFLLGNBSTlCQyxhQUFhekYsR0FHYitELEVBQVlOLEVBQU1PLE1BRWxCSyxFQUFNUSxJQUVON0UsRUFBaUIwRixZQUFXLFdBQ05qQyxFQUFNbkMsSUFBSSxLQUFPQyxTQUFTQyxnQkFHL0NnRCxJQUNJSCxHQUFPN0QsRUFBS21GLFFBQVEsSUFBSSxJQUFJdkUsT0FDL0JxQyxFQUFNMUMsTUFBTSxFQUFHc0QsR0FFZlosRUFBTTFDLE1BQU1zRCxNQUVYLFFBRUhrQixHQUFHLFlBQWFaLEdBQ2hCWSxHQUFHLGdCQXRMTCxTQUFzQlgsR0FDVCxJQUFJbkIsRUFBTStCLEtBQUssWUFBZixDQUlaLElBQ0NuQixFQUNBckQsRUFDQUMsRUFIRzJFLEVBQUloQixFQUFFaUIsT0FBU2pCLEVBQUVrQixRQUlML0MsRUFBU1UsRUFBTU8sTUFFckIsSUFBTjRCLEdBQWlCLEtBQU5BLEdBQWF4RixHQUFnQixNQUFOd0YsR0FFckM1RSxHQURBcUQsRUFBTVosRUFBTTFDLFNBQ0FDLE9BQ1pDLEVBQU1vRCxFQUFJcEQsS0FFQUQsR0FBVSxJQUNuQkEsRUFBVSxLQUFKNEUsRUE1R1QsU0FBa0J2QixHQUNqQixPQUFTQSxHQUFPLElBQU0zQixFQUFNMkIsS0FDNUIsT0FBT0EsRUEwR1EwQixDQUFTL0UsR0FBUUMsRUFBSW1ELEVBQVNwRCxFQUFNLEdBQ2pEQyxFQUFRLEtBQUoyRSxFQUFPeEIsRUFBU25ELEdBQUtBLEdBRTFCOEQsRUFBWS9ELEVBQU9DLEdBQ25CcUQsRUFBT3RELEVBQU9DLEVBQU0sR0FFcEIyRCxFQUFFb0Isa0JBQ2MsS0FBTkosRUFDVmpCLEVBQVVULEtBQUsvQyxLQUFNeUQsR0FDTCxLQUFOZ0IsSUFDVm5DLEVBQU1PLElBQUlELEdBQ1ZOLEVBQU0xQyxNQUFNLEVBQUc4RCxLQUNmRCxFQUFFb0Isc0JBMEpGVCxHQUFHLGlCQXRKTCxTQUF1QlgsR0FDVixJQUFJbkIsRUFBTStCLEtBQUssWUFBZixDQUlaLElBRUNTLEVBQ0EzQyxFQUNBNEMsRUFKR04sRUFBSWhCLEVBQUVpQixPQUFTakIsRUFBRWtCLFFBQ3BCekIsRUFBTVosRUFBTTFDLFFBS1Q2RCxFQUFFdUIsU0FBV3ZCLEVBQUV3QixRQUFVeEIsRUFBRXlCLFNBQVdULEVBQUksS0FFbENBLEdBQVcsS0FBTkEsSUFDWnZCLEVBQUlwRCxJQUFNb0QsRUFBSXJELE9BQVUsSUFDM0IrRCxFQUFZVixFQUFJckQsTUFBT3FELEVBQUlwRCxLQUMzQnFELEVBQU9ELEVBQUlyRCxNQUFPcUQsRUFBSXBELElBQUksS0FHM0JnRixFQUFJN0IsRUFBU0MsRUFBSXJELE1BQVEsSUFDakI4QixJQUNQUSxFQUFJSCxPQUFPbUQsYUFBYVYsR0FDcEJsRCxFQUFNdUQsR0FBRzVGLEtBQUtpRCxNQXJIckIsU0FBZ0JlLEdBQ2YsSUFBSWhCLEVBQ0hDLEVBQ0FpQixFQUNBZ0MsRUFFRCxJQUFLbEQsRUFBSWdCLEVBQUtmLEVBQUlNLEVBQWVTLEdBQU1oQixFQUFJUCxFQUFLTyxJQUMvQyxHQUFJWCxFQUFNVyxHQUFJLENBSWIsR0FIQWtCLEVBQUlILEVBQVNmLEdBQ2JrRCxFQUFJN0MsRUFBT0wsR0FDWEssRUFBT0wsR0FBS0MsSUFDUmlCLEVBQUl6QixHQUFPSixFQUFNNkIsR0FBR2xFLEtBQUtrRyxJQUc1QixNQUZBakQsRUFBSWlELEdBMEdKQyxDQUFPUCxHQUVQdkMsRUFBT3VDLEdBQUszQyxFQUNaa0IsSUFDQTBCLEVBQU85QixFQUFTNkIsR0FFYjFGLEVBTUZtRixZQUpZLFdBQ1gzRixFQUFFMEcsTUFBTTFHLEVBQUVjLEdBQUdFLE1BQU0wQyxFQUFNeUMsRUFBekJuRyxLQUdnQixHQUVqQjBELEVBQU0xQyxNQUFNbUYsR0FFVzdCLEVBQUlyRCxPQUFTNkIsR0FDakJvQixLQUl0QlcsRUFBRW9CLHNCQTJHRlQsR0FBRyx5QkFBeUIsV0FDVDlCLEVBQU0rQixLQUFLLGFBSTlCRSxZQUFXLFdBQ1YsSUFBSXJCLEVBQUlRLEdBQVMsR0FDakJwQixFQUFNMUMsTUFBTXNELEdBQ01KLE1BQ2hCLE1BRVkzRCxHQUFVQyxHQUVWa0QsRUFDSzRCLElBQUksY0FDSkUsR0FBRyxjQWpQekIsU0FBMkJYLEdBQzFCLElBQUk4QixFQUFTakQsRUFBTU8sTUFDZkssRUFBTVosRUFBTTFDLFFBQ2hCLEdBQUlnQyxHQUFVQSxFQUFPM0IsUUFBVTJCLEVBQU8zQixPQUFTc0YsRUFBT3RGLE9BQVMsQ0FHOUQsSUFEQXlELEdBQVMsR0FDRlIsRUFBSXJELE1BQVEsSUFBTTBCLEVBQU0yQixFQUFJckQsTUFBTSxJQUN4Q3FELEVBQUlyRCxRQUNMLEdBQWtCLElBQWRxRCxFQUFJckQsTUFFUCxLQUFPcUQsRUFBSXJELE1BQVE0QixJQUFvQkYsRUFBTTJCLEVBQUlyRCxRQUNoRHFELEVBQUlyRCxRQUVOeUMsRUFBTTFDLE1BQU1zRCxFQUFJckQsTUFBTXFELEVBQUlyRCxXQUNwQixDQUNLNkQsR0FBUyxHQUFwQixJQUNJOEIsRUFBbUJELEVBQU92QyxPQUFPRSxFQUFJckQsT0FDckNxRCxFQUFJckQsTUFBUThCLElBQ1hKLEVBQU0yQixFQUFJckQsUUFDYnFELEVBQUlyRCxRQUtEMEIsRUFBTTJCLEVBQUlyRCxPQUFPWCxLQUFLc0csSUFDeEJ0QyxFQUFJckQsU0FJUHlDLEVBQU0xQyxNQUFNc0QsRUFBSXJELE1BQU1xRCxFQUFJckQsT0FFM0JpRCxPQW9OQVksWUF4YjhCIiwiZmlsZSI6Im5wbS5qcXVlcnkubWFza2VkaW5wdXQuMmU1ZmI1MTU5YzhjMjVhOGFmOGYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUvQ29tbW9uSlNcbiAgICAgICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG5cbnZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXG5cdGlQaG9uZSA9IC9pcGhvbmUvaS50ZXN0KHVhKSxcblx0Y2hyb21lID0gL2Nocm9tZS9pLnRlc3QodWEpLFxuXHRhbmRyb2lkID0gL2FuZHJvaWQvaS50ZXN0KHVhKSxcblx0Y2FyZXRUaW1lb3V0SWQ7XG5cbiQubWFzayA9IHtcblx0Ly9QcmVkZWZpbmVkIGNoYXJhY3RlciBkZWZpbml0aW9uc1xuXHRkZWZpbml0aW9uczoge1xuXHRcdCc5JzogXCJbMC05XVwiLFxuXHRcdCdhJzogXCJbQS1aYS16XVwiLFxuXHRcdCcqJzogXCJbQS1aYS16MC05XVwiXG5cdH0sXG5cdGF1dG9jbGVhcjogdHJ1ZSxcblx0ZGF0YU5hbWU6IFwicmF3TWFza0ZuXCIsXG5cdHBsYWNlaG9sZGVyOiAnXydcbn07XG5cbiQuZm4uZXh0ZW5kKHtcblx0Ly9IZWxwZXIgRnVuY3Rpb24gZm9yIENhcmV0IHBvc2l0aW9uaW5nXG5cdGNhcmV0OiBmdW5jdGlvbihiZWdpbiwgZW5kKSB7XG5cdFx0dmFyIHJhbmdlO1xuXG5cdFx0aWYgKHRoaXMubGVuZ3RoID09PSAwIHx8IHRoaXMuaXMoXCI6aGlkZGVuXCIpIHx8IHRoaXMuZ2V0KDApICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGVvZiBiZWdpbiA9PSAnbnVtYmVyJykge1xuXHRcdFx0ZW5kID0gKHR5cGVvZiBlbmQgPT09ICdudW1iZXInKSA/IGVuZCA6IGJlZ2luO1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcblx0XHRcdFx0XHR0aGlzLnNldFNlbGVjdGlvblJhbmdlKGJlZ2luLCBlbmQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuY3JlYXRlVGV4dFJhbmdlKSB7XG5cdFx0XHRcdFx0cmFuZ2UgPSB0aGlzLmNyZWF0ZVRleHRSYW5nZSgpO1xuXHRcdFx0XHRcdHJhbmdlLmNvbGxhcHNlKHRydWUpO1xuXHRcdFx0XHRcdHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIGVuZCk7XG5cdFx0XHRcdFx0cmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBiZWdpbik7XG5cdFx0XHRcdFx0cmFuZ2Uuc2VsZWN0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodGhpc1swXS5zZXRTZWxlY3Rpb25SYW5nZSkge1xuXHRcdFx0XHRiZWdpbiA9IHRoaXNbMF0uc2VsZWN0aW9uU3RhcnQ7XG5cdFx0XHRcdGVuZCA9IHRoaXNbMF0uc2VsZWN0aW9uRW5kO1xuXHRcdFx0fSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKSB7XG5cdFx0XHRcdHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG5cdFx0XHRcdGJlZ2luID0gMCAtIHJhbmdlLmR1cGxpY2F0ZSgpLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLTEwMDAwMCk7XG5cdFx0XHRcdGVuZCA9IGJlZ2luICsgcmFuZ2UudGV4dC5sZW5ndGg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4geyBiZWdpbjogYmVnaW4sIGVuZDogZW5kIH07XG5cdFx0fVxuXHR9LFxuXHR1bm1hc2s6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRyaWdnZXIoXCJ1bm1hc2tcIik7XG5cdH0sXG5cdG1hc2s6IGZ1bmN0aW9uKG1hc2ssIHNldHRpbmdzKSB7XG5cdFx0dmFyIGlucHV0LFxuXHRcdFx0ZGVmcyxcblx0XHRcdHRlc3RzLFxuXHRcdFx0cGFydGlhbFBvc2l0aW9uLFxuXHRcdFx0Zmlyc3ROb25NYXNrUG9zLFxuICAgICAgICAgICAgbGFzdFJlcXVpcmVkTm9uTWFza1BvcyxcbiAgICAgICAgICAgIGxlbixcbiAgICAgICAgICAgIG9sZFZhbDtcblxuXHRcdGlmICghbWFzayAmJiB0aGlzLmxlbmd0aCA+IDApIHtcblx0XHRcdGlucHV0ID0gJCh0aGlzWzBdKTtcbiAgICAgICAgICAgIHZhciBmbiA9IGlucHV0LmRhdGEoJC5tYXNrLmRhdGFOYW1lKVxuXHRcdFx0cmV0dXJuIGZuP2ZuKCk6dW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHNldHRpbmdzID0gJC5leHRlbmQoe1xuXHRcdFx0YXV0b2NsZWFyOiAkLm1hc2suYXV0b2NsZWFyLFxuXHRcdFx0cGxhY2Vob2xkZXI6ICQubWFzay5wbGFjZWhvbGRlciwgLy8gTG9hZCBkZWZhdWx0IHBsYWNlaG9sZGVyXG5cdFx0XHRjb21wbGV0ZWQ6IG51bGxcblx0XHR9LCBzZXR0aW5ncyk7XG5cblxuXHRcdGRlZnMgPSAkLm1hc2suZGVmaW5pdGlvbnM7XG5cdFx0dGVzdHMgPSBbXTtcblx0XHRwYXJ0aWFsUG9zaXRpb24gPSBsZW4gPSBtYXNrLmxlbmd0aDtcblx0XHRmaXJzdE5vbk1hc2tQb3MgPSBudWxsO1xuXG5cdFx0bWFzayA9IFN0cmluZyhtYXNrKTtcblxuXHRcdCQuZWFjaChtYXNrLnNwbGl0KFwiXCIpLCBmdW5jdGlvbihpLCBjKSB7XG5cdFx0XHRpZiAoYyA9PSAnPycpIHtcblx0XHRcdFx0bGVuLS07XG5cdFx0XHRcdHBhcnRpYWxQb3NpdGlvbiA9IGk7XG5cdFx0XHR9IGVsc2UgaWYgKGRlZnNbY10pIHtcblx0XHRcdFx0dGVzdHMucHVzaChuZXcgUmVnRXhwKGRlZnNbY10pKTtcblx0XHRcdFx0aWYgKGZpcnN0Tm9uTWFza1BvcyA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdGZpcnN0Tm9uTWFza1BvcyA9IHRlc3RzLmxlbmd0aCAtIDE7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgICAgICBpZihpIDwgcGFydGlhbFBvc2l0aW9uKXtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlcXVpcmVkTm9uTWFza1BvcyA9IHRlc3RzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGVzdHMucHVzaChudWxsKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiB0aGlzLnRyaWdnZXIoXCJ1bm1hc2tcIikuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpbnB1dCA9ICQodGhpcyksXG5cdFx0XHRcdGJ1ZmZlciA9ICQubWFwKFxuICAgIFx0XHRcdFx0bWFzay5zcGxpdChcIlwiKSxcbiAgICBcdFx0XHRcdGZ1bmN0aW9uKGMsIGkpIHtcbiAgICBcdFx0XHRcdFx0aWYgKGMgIT0gJz8nKSB7XG4gICAgXHRcdFx0XHRcdFx0cmV0dXJuIGRlZnNbY10gPyBnZXRQbGFjZWhvbGRlcihpKSA6IGM7XG4gICAgXHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdH0pLFxuXHRcdFx0XHRkZWZhdWx0QnVmZmVyID0gYnVmZmVyLmpvaW4oJycpLFxuXHRcdFx0XHRmb2N1c1RleHQgPSBpbnB1dC52YWwoKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdHJ5RmlyZUNvbXBsZXRlZCgpe1xuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3MuY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZmlyc3ROb25NYXNrUG9zOyBpIDw9IGxhc3RSZXF1aXJlZE5vbk1hc2tQb3M7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVzdHNbaV0gJiYgYnVmZmVyW2ldID09PSBnZXRQbGFjZWhvbGRlcihpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmNvbXBsZXRlZC5jYWxsKGlucHV0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UGxhY2Vob2xkZXIoaSl7XG4gICAgICAgICAgICAgICAgaWYoaSA8IHNldHRpbmdzLnBsYWNlaG9sZGVyLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLnBsYWNlaG9sZGVyLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MucGxhY2Vob2xkZXIuY2hhckF0KDApO1xuICAgICAgICAgICAgfVxuXG5cdFx0XHRmdW5jdGlvbiBzZWVrTmV4dChwb3MpIHtcblx0XHRcdFx0d2hpbGUgKCsrcG9zIDwgbGVuICYmICF0ZXN0c1twb3NdKTtcblx0XHRcdFx0cmV0dXJuIHBvcztcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gc2Vla1ByZXYocG9zKSB7XG5cdFx0XHRcdHdoaWxlICgtLXBvcyA+PSAwICYmICF0ZXN0c1twb3NdKTtcblx0XHRcdFx0cmV0dXJuIHBvcztcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gc2hpZnRMKGJlZ2luLGVuZCkge1xuXHRcdFx0XHR2YXIgaSxcblx0XHRcdFx0XHRqO1xuXG5cdFx0XHRcdGlmIChiZWdpbjwwKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yIChpID0gYmVnaW4sIGogPSBzZWVrTmV4dChlbmQpOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0XHRpZiAodGVzdHNbaV0pIHtcblx0XHRcdFx0XHRcdGlmIChqIDwgbGVuICYmIHRlc3RzW2ldLnRlc3QoYnVmZmVyW2pdKSkge1xuXHRcdFx0XHRcdFx0XHRidWZmZXJbaV0gPSBidWZmZXJbal07XG5cdFx0XHRcdFx0XHRcdGJ1ZmZlcltqXSA9IGdldFBsYWNlaG9sZGVyKGopO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGogPSBzZWVrTmV4dChqKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0d3JpdGVCdWZmZXIoKTtcblx0XHRcdFx0aW5wdXQuY2FyZXQoTWF0aC5tYXgoZmlyc3ROb25NYXNrUG9zLCBiZWdpbikpO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBzaGlmdFIocG9zKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdGMsXG5cdFx0XHRcdFx0aixcblx0XHRcdFx0XHR0O1xuXG5cdFx0XHRcdGZvciAoaSA9IHBvcywgYyA9IGdldFBsYWNlaG9sZGVyKHBvcyk7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRcdGlmICh0ZXN0c1tpXSkge1xuXHRcdFx0XHRcdFx0aiA9IHNlZWtOZXh0KGkpO1xuXHRcdFx0XHRcdFx0dCA9IGJ1ZmZlcltpXTtcblx0XHRcdFx0XHRcdGJ1ZmZlcltpXSA9IGM7XG5cdFx0XHRcdFx0XHRpZiAoaiA8IGxlbiAmJiB0ZXN0c1tqXS50ZXN0KHQpKSB7XG5cdFx0XHRcdFx0XHRcdGMgPSB0O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGFuZHJvaWRJbnB1dEV2ZW50KGUpIHtcblx0XHRcdFx0dmFyIGN1clZhbCA9IGlucHV0LnZhbCgpO1xuXHRcdFx0XHR2YXIgcG9zID0gaW5wdXQuY2FyZXQoKTtcblx0XHRcdFx0aWYgKG9sZFZhbCAmJiBvbGRWYWwubGVuZ3RoICYmIG9sZFZhbC5sZW5ndGggPiBjdXJWYWwubGVuZ3RoICkge1xuXHRcdFx0XHRcdC8vIGEgZGVsZXRpb24gb3IgYmFja3NwYWNlIGhhcHBlbmVkXG5cdFx0XHRcdFx0Y2hlY2tWYWwodHJ1ZSk7XG5cdFx0XHRcdFx0d2hpbGUgKHBvcy5iZWdpbiA+IDAgJiYgIXRlc3RzW3Bvcy5iZWdpbi0xXSlcblx0XHRcdFx0XHRcdHBvcy5iZWdpbi0tO1xuXHRcdFx0XHRcdGlmIChwb3MuYmVnaW4gPT09IDApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0d2hpbGUgKHBvcy5iZWdpbiA8IGZpcnN0Tm9uTWFza1BvcyAmJiAhdGVzdHNbcG9zLmJlZ2luXSlcblx0XHRcdFx0XHRcdFx0cG9zLmJlZ2luKys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlucHV0LmNhcmV0KHBvcy5iZWdpbixwb3MuYmVnaW4pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBwb3MyID0gY2hlY2tWYWwodHJ1ZSk7XG5cdFx0XHRcdFx0dmFyIGxhc3RFbnRlcmVkVmFsdWUgPSBjdXJWYWwuY2hhckF0KHBvcy5iZWdpbik7XG5cdFx0XHRcdFx0aWYgKHBvcy5iZWdpbiA8IGxlbil7XG5cdFx0XHRcdFx0XHRpZighdGVzdHNbcG9zLmJlZ2luXSl7XG5cdFx0XHRcdFx0XHRcdHBvcy5iZWdpbisrO1xuXHRcdFx0XHRcdFx0XHRpZih0ZXN0c1twb3MuYmVnaW5dLnRlc3QobGFzdEVudGVyZWRWYWx1ZSkpe1xuXHRcdFx0XHRcdFx0XHRcdHBvcy5iZWdpbisrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdFx0aWYodGVzdHNbcG9zLmJlZ2luXS50ZXN0KGxhc3RFbnRlcmVkVmFsdWUpKXtcblx0XHRcdFx0XHRcdFx0XHRwb3MuYmVnaW4rKztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpbnB1dC5jYXJldChwb3MuYmVnaW4scG9zLmJlZ2luKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0cnlGaXJlQ29tcGxldGVkKCk7XG5cdFx0XHR9XG5cblxuXHRcdFx0ZnVuY3Rpb24gYmx1ckV2ZW50KGUpIHtcbiAgICAgICAgICAgICAgICBjaGVja1ZhbCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbCgpICE9IGZvY3VzVGV4dClcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hhbmdlKCk7XG4gICAgICAgICAgICB9XG5cblx0XHRcdGZ1bmN0aW9uIGtleWRvd25FdmVudChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnByb3AoXCJyZWFkb25seVwiKSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cblx0XHRcdFx0dmFyIGsgPSBlLndoaWNoIHx8IGUua2V5Q29kZSxcblx0XHRcdFx0XHRwb3MsXG5cdFx0XHRcdFx0YmVnaW4sXG5cdFx0XHRcdFx0ZW5kO1xuICAgICAgICAgICAgICAgICAgICBvbGRWYWwgPSBpbnB1dC52YWwoKTtcblx0XHRcdFx0Ly9iYWNrc3BhY2UsIGRlbGV0ZSwgYW5kIGVzY2FwZSBnZXQgc3BlY2lhbCB0cmVhdG1lbnRcblx0XHRcdFx0aWYgKGsgPT09IDggfHwgayA9PT0gNDYgfHwgKGlQaG9uZSAmJiBrID09PSAxMjcpKSB7XG5cdFx0XHRcdFx0cG9zID0gaW5wdXQuY2FyZXQoKTtcblx0XHRcdFx0XHRiZWdpbiA9IHBvcy5iZWdpbjtcblx0XHRcdFx0XHRlbmQgPSBwb3MuZW5kO1xuXG5cdFx0XHRcdFx0aWYgKGVuZCAtIGJlZ2luID09PSAwKSB7XG5cdFx0XHRcdFx0XHRiZWdpbj1rIT09NDY/c2Vla1ByZXYoYmVnaW4pOihlbmQ9c2Vla05leHQoYmVnaW4tMSkpO1xuXHRcdFx0XHRcdFx0ZW5kPWs9PT00Nj9zZWVrTmV4dChlbmQpOmVuZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2xlYXJCdWZmZXIoYmVnaW4sIGVuZCk7XG5cdFx0XHRcdFx0c2hpZnRMKGJlZ2luLCBlbmQgLSAxKTtcblxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fSBlbHNlIGlmKCBrID09PSAxMyApIHsgLy8gZW50ZXJcblx0XHRcdFx0XHRibHVyRXZlbnQuY2FsbCh0aGlzLCBlKTtcblx0XHRcdFx0fSBlbHNlIGlmIChrID09PSAyNykgeyAvLyBlc2NhcGVcblx0XHRcdFx0XHRpbnB1dC52YWwoZm9jdXNUZXh0KTtcblx0XHRcdFx0XHRpbnB1dC5jYXJldCgwLCBjaGVja1ZhbCgpKTtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24ga2V5cHJlc3NFdmVudChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnByb3AoXCJyZWFkb25seVwiKSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cblx0XHRcdFx0dmFyIGsgPSBlLndoaWNoIHx8IGUua2V5Q29kZSxcblx0XHRcdFx0XHRwb3MgPSBpbnB1dC5jYXJldCgpLFxuXHRcdFx0XHRcdHAsXG5cdFx0XHRcdFx0Yyxcblx0XHRcdFx0XHRuZXh0O1xuXG5cdFx0XHRcdGlmIChlLmN0cmxLZXkgfHwgZS5hbHRLZXkgfHwgZS5tZXRhS2V5IHx8IGsgPCAzMikgey8vSWdub3JlXG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBrICYmIGsgIT09IDEzICkge1xuXHRcdFx0XHRcdGlmIChwb3MuZW5kIC0gcG9zLmJlZ2luICE9PSAwKXtcblx0XHRcdFx0XHRcdGNsZWFyQnVmZmVyKHBvcy5iZWdpbiwgcG9zLmVuZCk7XG5cdFx0XHRcdFx0XHRzaGlmdEwocG9zLmJlZ2luLCBwb3MuZW5kLTEpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHAgPSBzZWVrTmV4dChwb3MuYmVnaW4gLSAxKTtcblx0XHRcdFx0XHRpZiAocCA8IGxlbikge1xuXHRcdFx0XHRcdFx0YyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoayk7XG5cdFx0XHRcdFx0XHRpZiAodGVzdHNbcF0udGVzdChjKSkge1xuXHRcdFx0XHRcdFx0XHRzaGlmdFIocCk7XG5cblx0XHRcdFx0XHRcdFx0YnVmZmVyW3BdID0gYztcblx0XHRcdFx0XHRcdFx0d3JpdGVCdWZmZXIoKTtcblx0XHRcdFx0XHRcdFx0bmV4dCA9IHNlZWtOZXh0KHApO1xuXG5cdFx0XHRcdFx0XHRcdGlmKGFuZHJvaWQpe1xuXHRcdFx0XHRcdFx0XHRcdC8vUGF0aCBmb3IgQ1NQIFZpb2xhdGlvbiBvbiBGaXJlRm94IE9TIDEuMVxuXHRcdFx0XHRcdFx0XHRcdHZhciBwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0JC5wcm94eSgkLmZuLmNhcmV0LGlucHV0LG5leHQpKCk7XG5cdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQocHJveHksMCk7XG5cdFx0XHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0XHRcdGlucHV0LmNhcmV0KG5leHQpO1xuXHRcdFx0XHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocG9zLmJlZ2luIDw9IGxhc3RSZXF1aXJlZE5vbk1hc2tQb3Mpe1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICB0cnlGaXJlQ29tcGxldGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0YXJ0LCBlbmQpIHtcblx0XHRcdFx0dmFyIGk7XG5cdFx0XHRcdGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kICYmIGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRcdGlmICh0ZXN0c1tpXSkge1xuXHRcdFx0XHRcdFx0YnVmZmVyW2ldID0gZ2V0UGxhY2Vob2xkZXIoaSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHdyaXRlQnVmZmVyKCkgeyBpbnB1dC52YWwoYnVmZmVyLmpvaW4oJycpKTsgfVxuXG5cdFx0XHRmdW5jdGlvbiBjaGVja1ZhbChhbGxvdykge1xuXHRcdFx0XHQvL3RyeSB0byBwbGFjZSBjaGFyYWN0ZXJzIHdoZXJlIHRoZXkgYmVsb25nXG5cdFx0XHRcdHZhciB0ZXN0ID0gaW5wdXQudmFsKCksXG5cdFx0XHRcdFx0bGFzdE1hdGNoID0gLTEsXG5cdFx0XHRcdFx0aSxcblx0XHRcdFx0XHRjLFxuXHRcdFx0XHRcdHBvcztcblxuXHRcdFx0XHRmb3IgKGkgPSAwLCBwb3MgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0XHRpZiAodGVzdHNbaV0pIHtcblx0XHRcdFx0XHRcdGJ1ZmZlcltpXSA9IGdldFBsYWNlaG9sZGVyKGkpO1xuXHRcdFx0XHRcdFx0d2hpbGUgKHBvcysrIDwgdGVzdC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0YyA9IHRlc3QuY2hhckF0KHBvcyAtIDEpO1xuXHRcdFx0XHRcdFx0XHRpZiAodGVzdHNbaV0udGVzdChjKSkge1xuXHRcdFx0XHRcdFx0XHRcdGJ1ZmZlcltpXSA9IGM7XG5cdFx0XHRcdFx0XHRcdFx0bGFzdE1hdGNoID0gaTtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKHBvcyA+IHRlc3QubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdGNsZWFyQnVmZmVyKGkgKyAxLCBsZW4pO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcltpXSA9PT0gdGVzdC5jaGFyQXQocG9zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGkgPCBwYXJ0aWFsUG9zaXRpb24pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNYXRjaCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChhbGxvdykge1xuXHRcdFx0XHRcdHdyaXRlQnVmZmVyKCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAobGFzdE1hdGNoICsgMSA8IHBhcnRpYWxQb3NpdGlvbikge1xuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5hdXRvY2xlYXIgfHwgYnVmZmVyLmpvaW4oJycpID09PSBkZWZhdWx0QnVmZmVyKSB7XG5cdFx0XHRcdFx0XHQvLyBJbnZhbGlkIHZhbHVlLiBSZW1vdmUgaXQgYW5kIHJlcGxhY2UgaXQgd2l0aCB0aGVcblx0XHRcdFx0XHRcdC8vIG1hc2ssIHdoaWNoIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW9yLlxuXHRcdFx0XHRcdFx0aWYoaW5wdXQudmFsKCkpIGlucHV0LnZhbChcIlwiKTtcblx0XHRcdFx0XHRcdGNsZWFyQnVmZmVyKDAsIGxlbik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEludmFsaWQgdmFsdWUsIGJ1dCB3ZSBvcHQgdG8gc2hvdyB0aGUgdmFsdWUgdG8gdGhlXG5cdFx0XHRcdFx0XHQvLyB1c2VyIGFuZCBhbGxvdyB0aGVtIHRvIGNvcnJlY3QgdGhlaXIgbWlzdGFrZS5cblx0XHRcdFx0XHRcdHdyaXRlQnVmZmVyKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHdyaXRlQnVmZmVyKCk7XG5cdFx0XHRcdFx0aW5wdXQudmFsKGlucHV0LnZhbCgpLnN1YnN0cmluZygwLCBsYXN0TWF0Y2ggKyAxKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIChwYXJ0aWFsUG9zaXRpb24gPyBpIDogZmlyc3ROb25NYXNrUG9zKTtcblx0XHRcdH1cblxuXHRcdFx0aW5wdXQuZGF0YSgkLm1hc2suZGF0YU5hbWUsZnVuY3Rpb24oKXtcblx0XHRcdFx0cmV0dXJuICQubWFwKGJ1ZmZlciwgZnVuY3Rpb24oYywgaSkge1xuXHRcdFx0XHRcdHJldHVybiB0ZXN0c1tpXSYmYyE9Z2V0UGxhY2Vob2xkZXIoaSkgPyBjIDogbnVsbDtcblx0XHRcdFx0fSkuam9pbignJyk7XG5cdFx0XHR9KTtcblxuXG5cdFx0XHRpbnB1dFxuXHRcdFx0XHQub25lKFwidW5tYXNrXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlucHV0XG5cdFx0XHRcdFx0XHQub2ZmKFwiLm1hc2tcIilcblx0XHRcdFx0XHRcdC5yZW1vdmVEYXRhKCQubWFzay5kYXRhTmFtZSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5vbihcImZvY3VzLm1hc2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5wcm9wKFwicmVhZG9ubHlcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cblx0XHRcdFx0XHRjbGVhclRpbWVvdXQoY2FyZXRUaW1lb3V0SWQpO1xuXHRcdFx0XHRcdHZhciBwb3M7XG5cblx0XHRcdFx0XHRmb2N1c1RleHQgPSBpbnB1dC52YWwoKTtcblxuXHRcdFx0XHRcdHBvcyA9IGNoZWNrVmFsKCk7XG5cblx0XHRcdFx0XHRjYXJldFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlucHV0LmdldCgwKSAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdFx0d3JpdGVCdWZmZXIoKTtcblx0XHRcdFx0XHRcdGlmIChwb3MgPT0gbWFzay5yZXBsYWNlKFwiP1wiLFwiXCIpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRpbnB1dC5jYXJldCgwLCBwb3MpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aW5wdXQuY2FyZXQocG9zKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCAxMCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5vbihcImJsdXIubWFza1wiLCBibHVyRXZlbnQpXG5cdFx0XHRcdC5vbihcImtleWRvd24ubWFza1wiLCBrZXlkb3duRXZlbnQpXG5cdFx0XHRcdC5vbihcImtleXByZXNzLm1hc2tcIiwga2V5cHJlc3NFdmVudClcblx0XHRcdFx0Lm9uKFwiaW5wdXQubWFzayBwYXN0ZS5tYXNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQucHJvcChcInJlYWRvbmx5XCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHZhciBwb3M9Y2hlY2tWYWwodHJ1ZSk7XG5cdFx0XHRcdFx0XHRpbnB1dC5jYXJldChwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5RmlyZUNvbXBsZXRlZCgpO1xuXHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHR9KTtcbiAgICAgICAgICAgICAgICBpZiAoY2hyb21lICYmIGFuZHJvaWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgLm9mZignaW5wdXQubWFzaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2lucHV0Lm1hc2snLCBhbmRyb2lkSW5wdXRFdmVudCk7XG4gICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRjaGVja1ZhbCgpOyAvL1BlcmZvcm0gaW5pdGlhbCBjaGVjayBmb3IgZXhpc3RpbmcgdmFsdWVzXG5cdFx0fSk7XG5cdH1cbn0pO1xufSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==